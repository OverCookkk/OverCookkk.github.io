## 训练图片素材基本要求：

1. 所有图片必须是同一种格式，如jpg、png等常见格式（**window使用`ren *.png *.jpg`命令可以将图片的一种格式转换为另一种**）

2. 所有图片改为同一种格式后，图片最好也改为同一类型名字（window选中所有图片，然后重命名其中一个文件，所有文件自动改名）

   



如果是角色训练集控制在20-50张图左右，太多会导致过拟合。

如果是训练其他风格，有说法是图片越多效果就越好，相应的训练时长也会增加，建议在50~80张。

如果是角色训练，也建议将需要训练的人物及相关的特征装饰都抠出来，背景尽量简单或直接是纯色背景，建议白底或黑底，但不要是透明底。 



## 训练人物图片素材要求：

1. 因为训练的是人物，所以图片主体尽量剪裁使得人物更加突出，人物更加占满整个图片。
2. 训练图片的标签需包含：人物特征、人物姿态（看向观众）、描述环境（模糊背景、背景中的建筑）
3. 图片反推生成的tag中可能会有某个角色的名称，这些需要删除。



将对tag文本文件的描述语进行处理，删除关于描述人物特征的tag，比如你要保留其黑色头发作为训练LoRa的自带特征，而不会在出图时头发被改为金色，那么这里就要将“black_hair”的描述tag删除掉。那么在训练时，AI自动将黑色头发与该LoRa绑定，之后的出图中就不会出现其他颜色的头发。还比如微笑的tag，smile，就需要保留，作为这张图像的面部特征需要告知AI。 





## 训练风格图片素材要求：

- 一个好的画风/概念模型应当不会造成人物形象被严重干扰（如发型发色瞳色等固定等）

- 方法：只保留标签中与人物相关的所有词条，如人物特征、人物姿态（看向观众）、描述环境（模糊背景、背景中的建筑）；如果不想lora学习某个特征，可能不在标签中加入这个特征的描述。
  - 对于风格模型，大部分情况下都不需要删除任何词条，因为自动识别是很难识别出画风的。
  - 对于概念模型，删除与概念有关的词条（比如想要训练剪影模型就要删掉silhouette这类的词条）





## kohya_ss训练参数：

1. Network Rank (Dimension)和Network Alpha这两个参数尽量保持一致；对于高分辨率的图像，例如768*768，以及对于非动漫模型的风格训练，Network Rank (Dimension)和Network Alpha这两个参数可以达到200甚至更高

2. Clip skip：在sd的1.5的基础模型上训练，该参数设置为1；在动漫模型（如Novel AI或者Anything v3上），请设置为2
3. 如果遇到颜色问题，可以打开颜色增强按钮Color augmentation
   1. LR Scheduler使用constant，LR warmup (% of steps)设置为0
4. 





过度拟合的迹象可能是伪影

如果无法通过提示词改变图像某些内容，这意味着Lora过度拟合（比如黑头发改成红头发

）

